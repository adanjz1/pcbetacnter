https://www.shareasale.com/

user: pccounter
password: pccounter

click 'Affiliate Login' and login

https://shareasale.com/a-apimanager.cfm [register IP, get token and use the example url to get coupons in xml format]


https://shareasale.com/a-dealscurrent.cfm?approvedonly=1
https://shareasale.com/a-dealbuilder.cfm?allmymerchants&current=1 [download current deals from your merchanta only]

The affiliate id is on top of the page, on the left

The API token is below, on the left

When you save the IP address, you get the secret key





affiliate id: 245502

api token: BivqzQSsctdx648q

IP: 122.176.67.22

secret key: LGf0tk4t2KPcxz8jDTv0cf5j0YImni2z

IP restriction: Require IP address match only for version 1.3 and lower

We will use PI ver 1.5 so hopefully IP will not be a problem

EX: https://shareasale.com/x.cfm?action=couponDeals&affiliateId=245502&token=BivqzQSsctdx648q&current=1&version=1.5



<?php

$myAffiliateID = '245502';
$APIToken = "";
$APISecretKey = "";
$myTimeStamp = gmdate(DATE_RFC1123);

$APIVersion = 1.2;
$actionVerb = "activity";
$sig = $APIToken.':'.$myTimeStamp.':'.$actionVerb.':'.$APISecretKey;

$sigHash = hash("sha256",$sig);

$myHeaders = array("x-ShareASale-Date: $myTimeStamp","x-ShareASale-Authentication: $sigHash");

$ch = curl_init();

curl_setopt($ch, CURLOPT_URL, "https://shareasale.com/x.cfm?affiliateId=$myAffiliateID&token=$APIToken&version=$APIVersion&action=$actionVerb");
curl_setopt($ch, CURLOPT_HTTPHEADER,$myHeaders);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
curl_setopt($ch, CURLOPT_HEADER, 0);

$returnResult = curl_exec($ch);

if ($returnResult) {
	//parse HTTP Body to determine result of request
	if (stripos($returnResult,"Error Code ")) {
		// error occurred
		trigger_error($returnResult,E_USER_ERROR);
	}
	else{
		// success
		echo $returnResult;
	}
}

else{
	// connection error
	trigger_error(curl_error($ch),E_USER_ERROR);
}

curl_close($ch);

?>